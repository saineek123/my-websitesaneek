<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Premium Investment Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <style>
    :root {
      --primary: #00e676;
      --primary-dark: #00c853;
      --secondary: #2979ff;
      --danger: #ff1744;
      --warning: #ffc107;
      --dark-bg: #121212;
      --card-bg: #1e1e1e;
      --card-border: #333;
      --text: #f5f5f5;
      --text-secondary: #bdbdbd;
      --success: #00c853;
      --info: #2979ff;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: var(--dark-bg);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
      background-image: radial-gradient(circle at 25% 25%, rgba(41, 121, 255, 0.1) 0%, transparent 55%),
                        radial-gradient(circle at 75% 75%, rgba(0, 230, 118, 0.1) 0%, transparent 55%);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
      margin-bottom: 30px;
      border-bottom: 1px solid var(--card-border);
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo i {
      font-size: 28px;
      color: var(--primary);
    }
    
    .logo h1 {
      font-size: 24px;
      font-weight: 700;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .user-actions {
      display: flex;
      gap: 15px;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: var(--primary);
      color: #000;
    }
    
    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 230, 118, 0.3);
    }
    
    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text);
      border: 1px solid var(--card-border);
    }
    
    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
    }
    
    .wallet-section {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      border: 1px solid var(--card-border);
    }
    
    .section-title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .section-title h2 {
      font-size: 22px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .section-title h2 i {
      color: var(--primary);
    }
    
    .wallet-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    
    .wallet-card {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      padding: 20px;
      border: 1px solid var(--card-border);
      transition: transform 0.3s ease;
    }
    
    .wallet-card:hover {
      transform: translateY(-5px);
      border-color: var(--primary);
    }
    
    .wallet-card h3 {
      font-size: 16px;
      color: var(--text-secondary);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .wallet-card .amount {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 15px;
    }
    
    .progress-container {
      background: rgba(255, 255, 255, 0.1);
      height: 8px;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      border-radius: 4px;
    }
    
    .recharge-progress {
      background: var(--primary);
    }
    
    .bonus-progress {
      background: var(--secondary);
    }
    
    .winning-progress {
      background: var(--warning);
    }
    
    .total-wallet {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #000;
      padding: 25px;
      border-radius: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .total-wallet h3 {
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .total-amount {
      font-size: 36px;
      font-weight: 800;
    }
    
    .filters {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }
    
    .search-box {
      flex: 1;
      position: relative;
      max-width: 400px;
    }
    
    .search-box input {
      width: 100%;
      padding: 12px 20px 12px 45px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      color: var(--text);
      font-size: 16px;
    }
    
    .search-box i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
    }
    
    .filter-btns {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .filter-btn {
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      color: var(--text);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .filter-btn.active, .filter-btn:hover {
      background: var(--primary);
      color: #000;
      border-color: var(--primary);
    }
    
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
    }
    
    .product-card {
      background: var(--card-bg);
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid var(--card-border);
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      position: relative;
    }
    
    .product-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
      border-color: var(--primary);
    }
    
    .product-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      z-index: 2;
    }
    
    .badge-popular {
      background: var(--danger);
      color: white;
    }
    
    .badge-new {
      background: var(--secondary);
      color: white;
    }
    
    .product-image {
      height: 180px;
      position: relative;
      overflow: hidden;
    }
    
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    
    .product-card:hover .product-image img {
      transform: scale(1.05);
    }
    
    .product-info {
      padding: 20px;
    }
    
    .product-title {
      font-size: 20px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
    }
    
    .product-stats {
      display: flex;
      justify-content: space-between;
      margin: 15px 0;
      padding: 15px 0;
      border-top: 1px solid var(--card-border);
      border-bottom: 1px solid var(--card-border);
    }
    
    .stat {
      text-align: center;
    }
    
    .stat-value {
      font-size: 18px;
      font-weight: 700;
      color: var(--primary);
    }
    
    .stat-label {
      font-size: 12px;
      color: var(--text-secondary);
      margin-top: 5px;
    }
    
    .product-desc {
      color: var(--text-secondary);
      margin-bottom: 20px;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .invest-actions {
      display: flex;
      gap: 10px;
    }
    
    .invest-btn {
      flex: 1;
      padding: 12px;
      text-align: center;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn-invest {
      background: var(--primary);
      color: #000;
    }
    
    .btn-invest:hover {
      background: var(--primary-dark);
      box-shadow: 0 4px 12px rgba(0, 230, 118, 0.3);
    }
    
    .btn-cancel {
      background: rgba(255, 23, 68, 0.15);
      color: var(--danger);
      border: 1px solid var(--danger);
    }
    
    .btn-cancel:hover {
      background: rgba(255, 23, 68, 0.25);
    }
    
    .invested-tag {
      background: rgba(0, 230, 118, 0.15);
      color: var(--primary);
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }
    
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 25px;
      border-radius: 8px;
      background: var(--card-bg);
      border-left: 4px solid var(--primary);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      gap: 10px;
      transform: translateX(120%);
      transition: transform 0.5s ease;
      z-index: 1000;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification i {
      font-size: 20px;
      color: var(--primary);
    }
    
    @media (max-width: 768px) {
      header {
        flex-direction: column;
        gap: 15px;
      }
      
      .user-actions {
        width: 100%;
        justify-content: center;
      }
      
      .filters {
        flex-direction: column;
      }
      
      .search-box {
        max-width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .products-grid {
        grid-template-columns: 1fr;
      }
      
      .wallet-cards {
        grid-template-columns: 1fr;
      }
    }
    
    .invested-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      padding: 20px;
      text-align: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .product-card:hover .invested-overlay {
      opacity: 1;
    }
    
    .invested-time {
      font-size: 24px;
      font-weight: 700;
      margin: 10px 0;
      color: var(--primary);
    }
    
    .profit-earned {
      font-size: 18px;
      margin: 5px 0;
    }
    
    .login-container {
      max-width: 400px;
      margin: 100px auto;
      background: var(--card-bg);
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      text-align: center;
      border: 1px solid var(--card-border);
    }
    
    .login-container h2 {
      margin-bottom: 30px;
      font-size: 28px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .login-form input {
      width: 100%;
      padding: 15px;
      margin-bottom: 20px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      color: var(--text);
      font-size: 16px;
    }
    
    .login-form button {
      width: 100%;
      padding: 15px;
      background: var(--primary);
      color: #000;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .login-form button:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 230, 118, 0.3);
    }
    
    .error-message {
      color: var(--danger);
      margin-bottom: 15px;
      display: none;
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="login-container" id="loginContainer">
      <h2>Investment Platform</h2>
      <p style="margin-bottom:20px;color:var(--text-secondary)">Login to access your investment portfolio</p>
      
      <div class="error-message" id="errorMessage"></div>
      
      <div class="login-form">
        <input type="email" id="email" placeholder="Email address" required>
        <input type="password" id="password" placeholder="Password" required>
        <button id="loginBtn">Login to Dashboard</button>
      </div>
      
      <p style="margin-top:20px;color:var(--text-secondary)">Use demo@example.com / password123</p>
    </div>
    
    <div id="dashboard" style="display:none">
      <div class="container">
        <header>
          <div class="logo">
            <i class="fas fa-chart-line"></i>
            <h1>Premium Investment Platform</h1>
          </div>
          <div class="user-actions">
            <button class="btn btn-secondary" id="logoutBtn">
              <i class="fas fa-sign-out-alt"></i> Logout
            </button>
          </div>
        </header>
        
        <div class="wallet-section">
          <div class="section-title">
            <h2><i class="fas fa-wallet"></i> Investment Wallet</h2>
            <button class="btn btn-primary">
              <i class="fas fa-plus"></i> Add Funds
            </button>
          </div>
          
          <div class="wallet-cards">
            <div class="wallet-card">
              <h3><i class="fas fa-bolt"></i> Recharge Balance</h3>
              <div class="amount" id="rechargeAmount">₹0.00</div>
              <div class="progress-container">
                <div class="progress-bar recharge-progress" id="rechargeProgress"></div>
              </div>
            </div>
            
            <div class="wallet-card">
              <h3><i class="fas fa-gift"></i> Bonus Balance</h3>
              <div class="amount" id="bonusAmount">₹0.00</div>
              <div class="progress-container">
                <div class="progress-bar bonus-progress" id="bonusProgress"></div>
              </div>
            </div>
            
            <div class="wallet-card">
              <h3><i class="fas fa-trophy"></i> Winning Balance</h3>
              <div class="amount" id="winningAmount">₹0.00</div>
              <div class="progress-container">
                <div class="progress-bar winning-progress" id="winningProgress"></div>
              </div>
            </div>
          </div>
          
          <div class="total-wallet">
            <h3><i class="fas fa-coins"></i> Total Balance</h3>
            <div class="total-amount" id="totalAmount">₹0.00</div>
          </div>
        </div>
        
        <div class="section-title">
          <h2><i class="fas fa-box-open"></i> Investment Products</h2>
          
          <div class="filters">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" id="searchInput" placeholder="Search investments...">
            </div>
            
            <div class="filter-btns">
              <button class="filter-btn active">All Products</button>
              <button class="filter-btn">Starter</button>
              <button class="filter-btn">Premium</button>
              <button class="filter-btn">VIP</button>
            </div>
          </div>
        </div>
        
        <div class="products-grid" id="productsGrid">
          <!-- Products will be loaded here -->
        </div>
      </div>
    </div>
    
    <div class="notification" id="notification">
      <i class="fas fa-check-circle"></i>
      <div id="notificationText"></div>
    </div>
  </div>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDTIIz6F0Dpxow48HiIyhn1qCISHcdubiQ",
      authDomain: "betting-app-43800.firebaseapp.com",
      databaseURL: "https://betting-app-43800-default-rtdb.firebaseio.com",
      projectId: "betting-app-43800",
      storageBucket: "betting-app-43800.appspot.com",
      messagingSenderId: "1097111498871",
      appId: "1:1097111498871:web:7b95f5d6b6e4c1c6a1f6e5"
    };
    
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();
    
    // DOM Elements
    const loginContainer = document.getElementById('loginContainer');
    const dashboard = document.getElementById('dashboard');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const loginBtn = document.getElementById('loginBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const errorMessage = document.getElementById('errorMessage');
    const productsGrid = document.getElementById('productsGrid');
    const notification = document.getElementById('notification');
    const notificationText = document.getElementById('notificationText');
    const rechargeAmount = document.getElementById('rechargeAmount');
    const bonusAmount = document.getElementById('bonusAmount');
    const winningAmount = document.getElementById('winningAmount');
    const totalAmount = document.getElementById('totalAmount');
    const rechargeProgress = document.getElementById('rechargeProgress');
    const bonusProgress = document.getElementById('bonusProgress');
    const winningProgress = document.getElementById('winningProgress');
    
    // App state
    let userId = null;
    let wallet = {};
    let investments = {};
    let products = {};
    
    // Initialize app
    function initApp() {
      auth.onAuthStateChanged(user => {
        if (user) {
          // User is signed in
          userId = user.uid;
          loginContainer.style.display = 'none';
          dashboard.style.display = 'block';
          loadUserData();
        } else {
          // User is signed out
          userId = null;
          loginContainer.style.display = 'block';
          dashboard.style.display = 'none';
        }
      });
    }
    
    // Load user data
    function loadUserData() {
      // Load wallet data
      db.ref("users/" + userId + "/wallet").on("value", snap => {
        wallet = snap.val() || { recharge: 0, bonus: 0, winning: 0 };
        updateWalletUI();
      });
      
      // Load investments
      db.ref("users/" + userId + "/investment").on("value", snap => {
        investments = snap.val() || {};
        renderProducts();
      });
      
      // Load products
      db.ref("products").on("value", snap => {
        products = snap.val() || {};
        renderProducts();
      });
    }
    
    // Update wallet UI
    function updateWalletUI() {
      const recharge = wallet.recharge || 0;
      const bonus = wallet.bonus || 0;
      const winning = wallet.winning || 0;
      const total = recharge + bonus + winning;
      
      // Update amounts
      rechargeAmount.textContent = `₹${recharge.toFixed(2)}`;
      bonusAmount.textContent = `₹${bonus.toFixed(2)}`;
      winningAmount.textContent = `₹${winning.toFixed(2)}`;
      totalAmount.textContent = `₹${total.toFixed(2)}`;
      
      // Update progress bars
      const maxValue = Math.max(recharge, bonus, winning, 10000);
      rechargeProgress.style.width = `${(recharge / maxValue) * 100}%`;
      bonusProgress.style.width = `${(bonus / maxValue) * 100}%`;
      winningProgress.style.width = `${(winning / maxValue) * 100}%`;
    }
    
    // Render products
    function renderProducts() {
      productsGrid.innerHTML = '';
      
      if (!products || Object.keys(products).length === 0) {
        productsGrid.innerHTML = '<div class="no-products">No investment products available at the moment</div>';
        return;
      }
      
      Object.keys(products).forEach(productId => {
        const product = products[productId];
        const isInvested = investments[productId];
        
        // Calculate profit if invested
        let daysInvested = 0;
        let profit = 0;
        if (isInvested) {
          const now = Date.now();
          const investedAt = isInvested.investedAt;
          daysInvested = Math.floor((now - investedAt) / (1000 * 60 * 60 * 24));
          profit = daysInvested * product.daily;
        }
        
        // Create product card
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
          ${product.popular ? `<div class="product-badge badge-popular"><i class="fas fa-fire"></i> POPULAR</div>` : ''}
          ${product.new ? `<div class="product-badge badge-new"><i class="fas fa-certificate"></i> NEW</div>` : ''}
          <div class="product-image">
            <img src="${product.image}" alt="${product.name}" />
          </div>
          <div class="product-info">
            <div class="product-title">
              <span>${product.name}</span>
              ${isInvested ? `<span class="invested-tag"><i class="fas fa-check-circle"></i> Invested</span>` : ''}
            </div>
            <p class="product-desc">${product.description || 'High return investment opportunity'}</p>
            
            <div class="product-stats">
              <div class="stat">
                <div class="stat-value">₹${product.price}</div>
                <div class="stat-label">Min. Investment</div>
              </div>
              <div class="stat">
                <div class="stat-value">${product.daily}</div>
                <div class="stat-label">Daily Return</div>
              </div>
              <div class="stat">
                <div class="stat-value">${product.term || 'N/A'}</div>
                <div class="stat-label">Term</div>
              </div>
            </div>
            
            ${isInvested ? `
              <div class="invested-overlay">
                <div>Invested ${daysInvested} days ago</div>
                <div class="profit-earned">Profit Earned: ₹${profit.toFixed(2)}</div>
              </div>
            ` : ''}
            
            <div class="invest-actions">
              ${isInvested ? `
                <button class="invest-btn btn-invest" data-id="${productId}">Manage</button>
                <button class="invest-btn btn-cancel" data-id="${productId}">Cancel</button>
              ` : `
                <button class="invest-btn btn-invest" data-id="${productId}">Invest Now</button>
              `}
            </div>
          </div>
        `;
        productsGrid.appendChild(card);
      });
      
      // Attach event listeners
      attachEventListeners();
    }
    
    // Attach event listeners to buttons
    function attachEventListeners() {
      // Invest buttons
      document.querySelectorAll('.btn-invest').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = this.getAttribute('data-id');
          const product = products[productId];
          
          if (this.textContent === 'Invest Now') {
            invest(productId, product.price);
          } else {
            // For manage, we might show more details
            showNotification(`You're already invested in ${product.name}`);
          }
        });
      });
      
      // Cancel buttons
      document.querySelectorAll('.btn-cancel').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = this.getAttribute('data-id');
          cancelInvestment(productId);
        });
      });
    }
    
    // Invest in a product
    function invest(productId, price) {
      if ((wallet.recharge || 0) < price) {
        showNotification('❌ Not enough Recharge balance', false);
        return;
      }
      
      const newRecharge = wallet.recharge - price;
      const updates = {};
      updates[`users/${userId}/wallet/recharge`] = newRecharge;
      updates[`users/${userId}/investment/${productId}`] = {
        amount: price,
        investedAt: Date.now()
      };
      
      db.ref().update(updates)
        .then(() => {
          showNotification(`✅ Investment successful in ${products[productId].name}!`);
        })
        .catch(error => {
          showNotification(`❌ Error: ${error.message}`, false);
        });
    }
    
    // Cancel investment
    function cancelInvestment(productId) {
      if (!confirm("Cancel this investment and refund to Winning?")) return;
      
      db.ref(`users/${userId}/investment/${productId}`).once("value", snap => {
        const inv = snap.val();
        if (!inv || !inv.amount) {
          showNotification("No investment found.", false);
          return;
        }
        
        const refund = inv.amount;
        const win = wallet.winning || 0;
        const updates = {};
        updates[`users/${userId}/wallet/winning`] = win + refund;
        updates[`users/${userId}/investment/${productId}`] = null;
        
        db.ref().update(updates)
          .then(() => {
            showNotification(`✅ ₹${refund} refunded to Winning.`);
          })
          .catch(error => {
            showNotification(`❌ Error: ${error.message}`, false);
          });
      });
    }
    
    // Show notification
    function showNotification(message, isSuccess = true) {
      notificationText.innerHTML = message;
      notification.classList.add('show');
      
      if (!isSuccess) {
        notification.style.borderLeftColor = 'var(--danger)';
        notification.querySelector('i').className = 'fas fa-exclamation-circle';
        notification.querySelector('i').style.color = 'var(--danger)';
      } else {
        notification.style.borderLeftColor = 'var(--primary)';
        notification.querySelector('i').className = 'fas fa-check-circle';
        notification.querySelector('i').style.color = 'var(--primary)';
      }
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }
    
    // Login function
    function login() {
      const email = emailInput.value;
      const password = passwordInput.value;
      
      if (!email || !password) {
        errorMessage.textContent = 'Please enter both email and password';
        errorMessage.style.display = 'block';
        return;
      }
      
      auth.signInWithEmailAndPassword(email, password)
        .then(() => {
          // Login successful
          errorMessage.style.display = 'none';
        })
        .catch(error => {
          // Handle errors
          errorMessage.textContent = error.message;
          errorMessage.style.display = 'block';
        });
    }
    
    // Logout function
    function logout() {
      auth.signOut()
        .then(() => {
          showNotification('Logged out successfully');
        })
        .catch(error => {
          showNotification(`Logout error: ${error.message}`, false);
        });
    }
    
    // Event listeners
    loginBtn.addEventListener('click', login);
    logoutBtn.addEventListener('click', logout);
    
    // Also allow login with Enter key
    passwordInput.addEventListener('keyup', (e) => {
      if (e.key === 'Enter') {
        login();
      }
    });
    
    // Initialize the app
    initApp();
    
    // Initialize with some demo products
    function initializeDemoProducts() {
      const productsRef = db.ref("products");
      
      productsRef.once('value').then(snap => {
        if (!snap.exists()) {
          // Only create demo products if they don't exist
          const demoProducts = {
            "prod1": {
              "name": "Gold Investment Plan",
              "price": 25000,
              "daily": 950,
              "image": "https://images.unsplash.com/photo-1551434678-e076c223a692?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80",
              "popular": true,
              "description": "Premium gold investment with guaranteed returns and daily dividends.",
              "term": 90
            },
            "prod2": {
              "name": "Tech Stocks Portfolio",
              "price": 50000,
              "daily": 2600,
              "image": "https://images.unsplash.com/photo-1600880292203-757bb62b4baf?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80",
              "new": true,
              "description": "Diversified tech stocks with high growth potential and quarterly dividends.",
              "term": 180
            },
            "prod3": {
              "name": "Real Estate Fund",
              "price": 100000,
              "daily": 2500,
              "image": "https://images.unsplash.com/photo-1620336655052-b57986f5a26a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80",
              "description": "Premium commercial real estate investments with monthly rental income.",
              "term": 365
            },
            "prod4": {
              "name": "Crypto Growth Fund",
              "price": 20000,
              "daily": 1500,
              "image": "https://images.unsplash.com/photo-1553877522-43269d4ea984?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80",
              "description": "Managed cryptocurrency portfolio with high volatility and growth potential.",
              "term": 60
            }
          };
          
          productsRef.set(demoProducts);
        }
      });
    }
    
    // Initialize demo products
    initializeDemoProducts();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BIG WIN - Stylish Betting Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle at top, #101820, #000);
      color: #fff;
    }
    header {
      background: linear-gradient(90deg, #0f0c29, #302b63, #24243e);
      padding: 20px;
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }
    nav {
      background: #1a1a2e;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      padding: 14px;
    }
    nav a {
      color: #00f7ff;
      text-decoration: none;
      font-weight: 600;
      padding: 8px 16px;
      background: #0f3460;
      border-radius: 20px;
      transition: 0.3s ease;
    }
    nav a:hover {
      background: #00f7ff;
      color: #000;
    }
    .dashboard {
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 20px;
    }
    .info {
      background: linear-gradient(145deg, #1f1f2f, #2e2e3e);
      padding: 25px;
      border-radius: 20px;
      text-align: center;
      margin-bottom: 30px;
    }
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
    }
    .card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 20px;
      text-align: center;
      backdrop-filter: blur(12px);
      transition: 0.3s ease;
    }
    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 10px 30px rgba(0, 255, 255, 0.25);
    }
    .card h3 {
      margin: 16px 0;
      font-size: 1.2rem;
      color: #00f7ff;
    }
    button {
      padding: 10px 20px;
      background: #00f7ff;
      border: none;
      border-radius: 30px;
      color: #000;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.3s ease;
    }
    button:hover {
      background: #a0f9ff;
    }
    .team-btn {
      display: flex;
      justify-content: space-between;
      background: #14213d;
      padding: 12px 16px;
      margin: 10px 0;
      border-radius: 15px;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.3s ease;
    }
    .team-btn:hover {
      background: #1f2f4d;
    }
    .rate {
      background: #00f7ff;
      color: #000;
      padding: 6px 10px;
      border-radius: 8px;
    }
    input[type="number"] {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      background-color: #1a1a2e;
      border: 1px solid #00f7ff44;
      color: #fff;
      margin-top: 10px;
    }
    .logout {
      margin: 50px auto;
      text-align: center;
    }
    .logout button {
      background-color: #ff4b5c;
      color: #fff;
      border-radius: 30px;
    }
    .logout button:hover {
      background-color: #ff7b87;
    }
    @media (max-width: 600px) {
      nav { gap: 8px; padding: 10px; }
      nav a { font-size: 0.9rem; padding: 6px 12px; }
    }
  </style>
</head>
<body>
  <header>ğŸ BIG WIN</header>
  <nav>
    <a href="index.html">ğŸ Home</a>
    <a href="recharge.html">ğŸ’°Recharge</a>
    <a href="withdraw.html">ğŸ’¸Withdraw</a>
    <a href="history.html">ğŸ“œHistory</a>
    <a href="account.html">ğŸ‘¤Account</a>
    <a href="support.html">ğŸ“Support</a>
    <a href="invite.html">Invite Friends</a>
    <a href="login.html">Logout</a>
  </nav>
  
  <div class="dashboard">
    <div class="info">
      <h2>Welcome, <span id="userName">User</span></h2>
      <p>Total Balance: â‚¹<span id="totalBalance">0</span></p>
      <p style="margin-top:10px; font-size: 14px; color:#ccc;">
        ğŸ’³ Recharge: â‚¹<span id="rechargeBalance">0</span> |
        ğŸ Bonus: â‚¹<span id="bonusBalance">0</span> |
        ğŸ† Winning: â‚¹<span id="winningBalance">0</span>
      </p>
    </div>
  </div>
         <img src="rechage.jpg.jpg" alt="My Image" width="400" height="200">
    <img src="refural.png.png" alt="referral" width="400" height="200">
    <div class="cards">
      <div class="card"><h3>âš½ Sports Betting</h3><button onclick="window.location.href='bet.html'">Play Now</button></div>
      <div class="card"><h3>ğŸ° Slots</h3><button onclick="window.location.href='slots.html'">Play Now</button></div>
        <div class="card"><h3>ğŸ® Mines Game</h3><button onclick="window.location.href='mines.html'">Play Now</button></div>
      <div class="card"><h3>ğŸ® Head or Tail</h3><button onclick="window.location.href='head_tail_game.html'">Play Now</button></div>
       <div class="card"><h3>ğŸ® Andar Bahar</h3><button onclick="window.location.href='andar-bahar.html'">Play Now</button></div>
      <div class="card"><h3>ğŸ® Dragon vs Tiger</h3><button onclick="window.location.href='dragon.html'">Play Now</button></div>
       <div class="card"><h3>ğŸ® Red & Black </h3><button onclick="window.location.href='red.html'">Play Now</button></div>
      <div class="card"><h3>ğŸ° Lucky Spin</h3><button onclick="window.location.href='spin.html'">Play Now</button></div>
      <div class="card"><h3>ğŸ’° Lottery</h3><button onclick="window.location.href='K3_Game_Mobile_Final.html'">Play Now</button></div>
      <div class="card"><h3>ğŸ® Aviator</h3><button onclick="window.location.href='aviator.html'">Play Now</button></div>
      <div class="card"><h3>ğŸ’³ Wallet</h3><button onclick="window.location.href='wallet.html'">Withdraw</button></div>
      <div class="card"><h3>ğŸ’³ Recharge</h3><button onclick="window.location.href='recharge.html'">Recharge</button></div>
      <div class="card"><h3>ğŸ‘¤ My Account</h3><button onclick="window.location.href='account.html'">View Profile</button></div>
      <div class="card"><h3>âš™ï¸ Settings</h3><button onclick="window.location.href='settings.html'">Settings</button></div>
    
     
      
     
      
    </div>
    <div class="betting-section">
      <h2 style="text-align:center; margin:30px 0 20px;">ğŸ”¥ Live Matches</h2>
      <div class="cards" id="matchesContainer"></div>
    </div>
    <div class="logout">
      <button onclick="logout()">Logout</button>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDTIIz6F0Dpxow48HiIyhn1qCISHcdubiQ",
      authDomain: "betting-app-43800.firebaseapp.com",
      databaseURL: "https://betting-app-43800-default-rtdb.firebaseio.com",
      projectId: "betting-app-43800"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>

  <script>
    const user = JSON.parse(localStorage.getItem("loggedInUser"));
    if (!user) {
      window.location.href = "login.html";
    } else {
      document.getElementById("userName").innerText = user.username || "Guest";
    }

    const userId = localStorage.getItem("userId");
    if (userId) {
      const totalEl = document.getElementById("totalBalance");
const rechargeEl = document.getElementById("rechargeBalance");
const bonusEl = document.getElementById("bonusBalance");
const winningEl = document.getElementById("winningBalance");

db.ref("users/" + userId + "/wallet").on("value", (snap) => {
  const wallet = snap.val() || {};
  const recharge = wallet.recharge || 0;
  const bonus = wallet.bonus || 0;
  const winning = wallet.winning || 0;
  const total = recharge + bonus + winning;

  totalEl.innerText = total.toFixed(2);
  rechargeEl.innerText = recharge.toFixed(2);
  bonusEl.innerText = bonus.toFixed(2);
  winningEl.innerText = winning.toFixed(2);
});

    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      localStorage.removeItem("userId");
      window.location.href = "login.html";
    }

    const matches = JSON.parse(localStorage.getItem("matchRates")) || [];
    const selectedBets = {};

    function renderMatches() {
      const container = document.getElementById("matchesContainer");
      container.innerHTML = "";

      matches.forEach(match => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h3>${match.team1} vs ${match.team2}</h3>
          <div class="team-btn" onclick="selectTeam(${match.id}, '${match.team1}', ${match.rate1})">
            <span>${match.team1}</span><span class="rate">@${match.rate1}</span>
          </div>
          <div class="team-btn" onclick="selectTeam(${match.id}, '${match.team2}', ${match.rate2})">
            <span>${match.team2}</span><span class="rate">@${match.rate2}</span>
          </div>
          <input type="number" id="amount-${match.id}" placeholder="Enter Amount">
          <button onclick="placeBet(${match.id})">Place Bet</button>
          <div id="selected-${match.id}" style="font-size:14px; margin-top:5px;"></div>
        `;
        container.appendChild(card);
      });
    }

    function selectTeam(matchId, team, rate) {
      selectedBets[matchId] = { team, rate };
      document.getElementById(`selected-${matchId}`).innerText = `Selected: ${team} @${rate}`;
    }

    function placeBet(matchId) {
      const amount = parseFloat(document.getElementById(`amount-${matchId}`).value);
      const selected = selectedBets[matchId];
      if (!selected || isNaN(amount) || amount <= 0) {
        alert("Select team and valid amount.");
        return;
      }
      if (user.balance < amount) {
        alert("Insufficient balance!");
        return;
      }
      const returnAmount = (amount * selected.rate).toFixed(2);
      const match = matches.find(m => m.id === matchId);
      const newBet = {
        match: `${match.team1} vs ${match.team2}`,
        team: selected.team,
        rate: selected.rate,
        amount: amount,
        return: returnAmount,
        time: new Date().toLocaleString(),
        result: "pending"
      };
      user.bets = user.bets || [];
      user.bets.push(newBet);
      user.balance -= amount;
      let allUsers = JSON.parse(localStorage.getItem("users")) || [];
      const index = allUsers.findIndex(u => u.number === user.number);
      if (index !== -1) {
        allUsers[index] = user;
        localStorage.setItem("users", JSON.stringify(allUsers));
      }
      localStorage.setItem("loggedInUser", JSON.stringify(user));
      alert(`âœ… Bet placed on ${selected.team}. Return: â‚¹${returnAmount}`);
      window.location.href = "history.html";
    }

    renderMatches();
  </script>
</body>
</html>
